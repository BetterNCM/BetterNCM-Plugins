(()=>{var c="better-cloud-search_max-search-limit";function d(){return parseInt(localStorage.getItem(c))||5}function u(e){localStorage.setItem(c,e.toString())}plugin.onConfig(e=>{let t=document.createElement("div"),o=document.createElement("span"),n=e.makeInput(d(),{oninput:a=>{u(a.target.value)}});return o.innerText="Max Search Limit: ",t.appendChild(o),t.appendChild(n),t});plugin.onLoad(()=>{window.loadmaxlimit=function(){return parseInt(localStorage.getItem(c))||5},window.cloudsearch=function(e){return console.log(`cloudsearch_main(${e})`),new Promise((t,o)=>{function n(r){console.log(`Resolved cloudsearch(arg: ${e}):`,r),t(r)}let a=window.ctl.cloudListManager.NI.uid,i=window.loadmaxlimit();var l={data:{uid:a,offset:0,total:!0,limit:i,keyword:e},ext:{},key:`track_cloud_search-${a}-${e}`,limit:i,offset:0,onload:n,rkey:`r-track_cloud_search-${a}-${e}-0-${i}`};window.ctl.player.AJ[0].MF.$i(l),window.ctl.player.AJ[0].MF.Ge("doloadlist",l)})},betterncm.app.getSucceededHijacks().then(e=>{e.includes("BetterCloudSearch::")||console.error("Failed to hijack BetterCloudSearch::")})});})();
