(()=>{function l(){return h("div",null,h("h1",null,"BetterNCM Plugin Config"))}var s=class{constructor(e,n){this._analyser=e,this._ctx=n,this._bufferLength=this._analyser.frequencyBinCount,this._dataArray=new Uint8Array(this._bufferLength)}drawBar(){requestAnimationFrame(this.drawBar.bind(this)),this._analyser.getByteFrequencyData(this._dataArray),this._ctx.clearRect(0,0,this._ctx.canvas.width,this._ctx.canvas.height),this._ctx.fillStyle="rgba(0, 0, 0, .1)",this._ctx.fillRect(0,0,this._ctx.canvas.width,this._ctx.canvas.height);let e=this._ctx.canvas.width/this._bufferLength*14,n=0;for(let a=0;a<this._bufferLength;a++){let r=this._dataArray[a];this._ctx.fillStyle="rgba(114, 90, "+r+",.6)",this._ctx.fillRect(n,this._ctx.canvas.height-r,e,r),n+=e+1}}drawLine(){}};plugin.onConfig(()=>{let i=document.createElement("div");return ReactDOM.render(l(),i),i});var t=document.createElement("canvas");t.width=window.innerWidth;t.height=window.innerHeight;t.style.position="absolute";t.style.top="0";t.style.left="50%";t.style.transform="translateX(-50%)";t.style.zIndex="1";t.style.pointerEvents="none";var o,c=t.getContext("2d");plugin.onLoad(i=>{betterncm.utils.waitForElement(".g-single").then(e=>{e.appendChild(t),window.onresize=()=>{t.width=window.innerWidth,t.height=window.innerHeight}}),betterncm.utils.waitForElement(".btnp").then(e=>{loadedPlugins.LibFrontendPlay.addEventListener("updateCurrentAudioPlayer",n=>{let r=n.currentTarget.currentAudioAnalyser;o=new s(r,c),o.drawBar()})})});})();
